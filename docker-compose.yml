version: "3.8"

services:
  smsie:
    build: .
    image: smsie:latest
    container_name: smsie
    restart: unless-stopped
    ports:
      - "8080:8080"
    volumes:
      - smsie_data:/app/data
      # Uncomment if you want to use a local config.yaml
      # - ./config.yaml:/app/config.yaml

    # --- Modem Access Configuration ---

    # Option 1: Automatic Port Scanning & Hot-plug (Recommended for ease of use)
    # Requires privileged mode and mapping /dev to detect changes.
    privileged: true
    devices:
      - /dev:/dev

    # Option 2: specific Device Mapping (More secure)
    # If using this, comment out Option 1 and uncomment below.
    # Note: Hot-plugging will not work; container needs restart if modem changes.
    # devices:
    #   - /dev/ttyUSB0:/dev/ttyUSB0
    #   - /dev/ttyUSB1:/dev/ttyUSB1

volumes:
  smsie_data:
